function Bubble(e){function l(e){e.velocity.y/=n.water_density;e.velocity.y+=-(e.y*.01)/e.mass;e.y+=e.velocity.y;e.x>n.width-e.currentSize&&(e.velocity.x=-e.velocity.x);e.x<e.currentSize&&(e.velocity.x=Math.abs(e.velocity.x));e.velocity.x/=1.04;e.velocity.x=e.velocity.x<0?Math.min(e.velocity.x,-0.8/e.mass):Math.max(e.velocity.x,.8/e.mass);e.x+=e.velocity.x}function c(e,t){e.velocity.x/=1.15;e.velocity.y/=1.05;while(e.children.length<e.dissolveSize)e.children.push({x:0,y:0,size:Math.random()*e.dissolveSize,velocity:{x:Math.random()*20-10,y:-(Math.random()*10)}});for(var n=0;n<e.children.length;n++){var r=e.children[n];r.x+=r.velocity.x;r.y+=r.velocity.y;r.velocity.x/=1.1;r.velocity.y+=.4;r.size/=1.1;t.moveTo(e.x+r.x,e.y+r.y);t.arc(e.x+r.x,e.y+r.y,r.size,0,Math.PI*2,!0)}return{j:n,c:r}}function h(e){var t,r=s.createLinearGradient(n.width*n.air_percent,n.height*.2,n.width*.5,n.height);for(t in n.gradient_fill_pts)r.addColorStop(t,n.gradient_fill_pts[t]);s.clearRect(0,0,n.width,n.height);s.fillStyle=r;if(n.is_circle){s.arc(n.width/2,n.width/2,150,0,Math.PI*2,!0);s.fill()}else s.fillRect(0,0,n.width,n.height);var u=o.length;s.fillStyle="#rgba(0,200,255,0)";s.beginPath();for(i=0;i<u;i++){var a=o[i];l(a);if(a.dissolved==0){s.moveTo(a.x,a.y);s.arc(a.x,a.y,a.currentSize,0,Math.PI*2,!0)}else c(a,s)}s.fill()}function p(){if(o.length>n.max_bubbles){var e=0;if(o[e].dissolved){for(;e<o.length;e++)if(o[e].dissolved==0){o[e].dissolveSize=n.small_bubble_dissolve;d(e);break}}else d(e)}var t=15,r=30,i=t+Math.random()*(r-t),s=20,u={x:r+Math.random()*(n.width-r),y:n.height-r,velocity:{x:Math.random()*s-s/2,y:0},size:i,mass:i/r+1,dissolved:!1,dissolveSize:n.big_bubbles_dissolve,children:[]};u.currentSize=u.size;o.push(u)}function d(e){var t=o[e];if(t.dissolved==0){t.dissolved=!0;setTimeout(function(){for(var e=0;e<o.length;e++)if(o[e]==t){o.splice(e,1);break}},2e3)}}function v(e,t){var n=t.x-e.x,r=t.y-e.y;return Math.sqrt(n*n+r*r)}var t={width:300,height:300,air_percent:-0.2,water_density:1.5,bubble_frequency:400,max_bubbles:5,big_bubbles_dissolve:20,small_bubble_dissolve:6,is_circle:!0,gradient_fill_pts:{0:"#2e2c6d",1:"rgba(46,44,109,0)"}},n=_.extend({},t,e),r,s,o,u,a,f;this.Initialize=function(e){r=document.getElementById(e);if(r&&r.getContext){s=r.getContext("2d");o=[];u=setInterval(h,40);a=setInterval(p,n.bubble_frequency);p()}}};